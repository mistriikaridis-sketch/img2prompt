<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JH6GXZ293T"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-JH6GXZ293T');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Pic to Prompt | Zen - Free AI Image to Text Converter</title>
    <meta name="description" content="Instantly convert any image to a descriptive prompt. Best free AI tool to extract text prompts from photos for Midjourney V6, Stable Diffusion, and DALL-E. No sign-up required.">
    <meta name="keywords" content="image to prompt, pic to prompt, picture to text, midjourney prompt generator, ai art reverse engineering, stable diffusion prompt helper, img2prompt">
    
    <meta property="og:title" content="Pic to Prompt | Turn Photos into Magic Prompts">
    <meta property="og:description" content="Upload an image, get a professional AI art prompt instantly. Free tool for creators.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.pic2prompt.com">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --ink-black: #1a1a1a;
            --paper-white: #fcfcfc;
            --accent-red: #cc3300;
            --grid-color: #e5e5e5;
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: var(--paper-white); 
            color: var(--ink-black);
            background-image: radial-gradient(var(--grid-color) 1px, transparent 1px);
            background-size: 40px 40px;
            -webkit-font-smoothing: antialiased;
        }

        .serif { font-family: 'Playfair Display', serif; }

        .zen-card {
            background: #ffffff;
            border: 1px solid #eeeeee;
            box-shadow: 0 4px 20px rgba(0,0,0,0.02);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .upload-dashed { 
            border: 1px dashed #d1d5db; 
            transition: all 0.3s ease; 
            background: #fafafa;
        }
        .upload-dashed:hover { 
            border-color: var(--ink-black); 
            background: #ffffff; 
        }

        .tracking-wide-xl { letter-spacing: 0.2em; }
        textarea::-webkit-scrollbar { width: 0; background: transparent; }

        .loading-line {
            width: 40px;
            height: 2px;
            background-color: var(--ink-black);
            animation: line-expand 1.5s infinite ease-in-out;
        }
        @keyframes line-expand {
            0% { width: 0; opacity: 0; }
            50% { width: 40px; opacity: 1; }
            100% { width: 0; opacity: 0; margin-left: 40px; }
        }
        
        .history-item:hover { border-color: #999; }
        
        /* FAQÊäòÂè†Ê†∑Âºè */
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center py-24 px-6">

    <div class="w-full max-w-5xl mb-20 text-center">
        <div class="mb-6">
            <span class="text-[10px] uppercase font-bold tracking-wide-xl text-gray-400 border-b border-gray-200 pb-2">AI Visual Interpretation</span>
        </div>
        <h1 class="text-5xl md:text-6xl font-medium serif tracking-wider text-black flex items-center justify-center gap-3">
            Picture to Prompt<span class="text-red-600 text-xl align-top self-start mt-2">‚óè</span>
        </h1>
        <p class="mt-6 text-gray-500 font-light text-sm tracking-wide max-w-md mx-auto italic serif">
            "Transforming visual aesthetics into poetic prompts."
        </p>
    </div>

    <div class="w-full max-w-6xl grid md:grid-cols-2 gap-12 items-stretch">
        <div class="zen-card p-4 h-full relative group">
            <div onclick="document.getElementById('file-input').click()" class="upload-dashed h-full min-h-[400px] flex flex-col items-center justify-center cursor-pointer relative overflow-hidden">
                <input type="file" id="file-input" class="hidden" accept="image/*" onchange="handleFile(event)">
                
                <div id="placeholder" class="text-center p-8 transition-opacity duration-300 space-y-5">
                    <div class="text-5xl font-light text-gray-300 group-hover:text-black transition duration-500">+</div>
                    <div>
                        <p class="font-medium text-black tracking-widest text-xs uppercase">Upload Image</p>
                        <p class="text-[10px] text-gray-400 mt-2 font-mono">JPG / PNG / WEBP</p>
                    </div>
                </div>
                
                <img id="preview" class="hidden w-full h-full object-contain p-6" />
                
                <button id="close-preview" onclick="removeImage(event)" class="hidden absolute top-4 right-4 text-gray-400 hover:text-red-600 transition z-30 font-mono text-xl">√ó</button>

                <div id="loading" class="hidden absolute inset-0 bg-white/95 flex flex-col items-center justify-center z-20">
                    <div class="loading-line"></div>
                    <span class="mt-4 text-[10px] font-bold text-gray-800 tracking-widest uppercase">Analyzing...</span>
                </div>
            </div>
        </div>

        <div class="zen-card p-8 h-full relative flex flex-col">
            <div class="flex justify-between items-center mb-6 border-b border-gray-100 pb-4">
                <span class="text-[10px] font-bold text-gray-400 uppercase tracking-widest">Prompt Result</span>
                <button id="copy-btn" onclick="copyText()" class="text-[10px] font-bold text-black hover:text-red-600 transition tracking-widest uppercase">Copy Text</button>
            </div>
            <textarea id="result" class="w-full flex-grow text-sm font-mono text-gray-700 leading-8 resize-none outline-none bg-transparent placeholder-gray-200" placeholder="// The AI generated prompt will appear here quietly..." spellcheck="false"></textarea>
        </div>
    </div>

    <div class="w-full max-w-6xl mt-24 border-t border-gray-200 pt-10">
        <div class="flex items-center justify-between mb-8">
            <h2 class="text-xs font-bold text-gray-400 uppercase tracking-widest">Archive</h2>
            <button onclick="clearHistory()" class="text-[10px] text-gray-400 hover:text-red-600 transition uppercase">Clear All</button>
        </div>
        <div id="history-list" class="grid grid-cols-1 md:grid-cols-3 gap-6"></div>
    </div>

    <div class="w-full max-w-4xl mt-20 mb-20 px-6">
        <h2 class="text-xs font-bold text-gray-400 uppercase tracking-widest mb-8 text-center">User Guide & FAQ</h2>
        
        <div class="space-y-4">
            <details class="group bg-white border border-gray-100 rounded-lg open:border-gray-300 transition-all duration-300">
                <summary class="flex justify-between items-center cursor-pointer p-6 list-none">
                    <h3 class="text-sm font-serif font-medium text-gray-800">1. How to convert an image to prompt?</h3>
                    <span class="text-gray-400 group-open:rotate-180 transition-transform duration-300">‚ñº</span>
                </summary>
                <div class="px-6 pb-6 text-sm text-gray-500 leading-relaxed font-light">
                    Simply click the <strong>"+"</strong> area or drag and drop your reference image (JPG, PNG, WEBP). Our AI vision model will instantly analyze the composition, lighting, style, and subject matter.
                </div>
            </details>

            <details class="group bg-white border border-gray-100 rounded-lg open:border-gray-300 transition-all duration-300">
                <summary class="flex justify-between items-center cursor-pointer p-6 list-none">
                    <h3 class="text-sm font-serif font-medium text-gray-800">2. Best way to use the result in Midjourney?</h3>
                    <span class="text-gray-400 group-open:rotate-180 transition-transform duration-300">‚ñº</span>
                </summary>
                <div class="px-6 pb-6 text-sm text-gray-500 leading-relaxed font-light">
                    <ol class="list-decimal pl-4 space-y-2">
                        <li>Click <strong>"COPY TEXT"</strong> to grab the generated prompt.</li>
                        <li>Go to Discord (Midjourney) or your Stable Diffusion interface.</li>
                        <li>Type <code>/imagine</code> and paste the prompt.</li>
                        <li><strong>Pro Tip:</strong> You can add parameters like <code>--ar 16:9</code> or <code>--v 6.0</code> at the end.</li>
                    </ol>
                </div>
            </details>

            <details class="group bg-white border border-gray-100 rounded-lg open:border-gray-300 transition-all duration-300">
                <summary class="flex justify-between items-center cursor-pointer p-6 list-none">
                    <h3 class="text-sm font-serif font-medium text-gray-800">3. Is this tool free to use?</h3>
                    <span class="text-gray-400 group-open:rotate-180 transition-transform duration-300">‚ñº</span>
                </summary>
                <div class="px-6 pb-6 text-sm text-gray-500 leading-relaxed font-light">
                    Yes, <strong>Pic to Prompt | Zen</strong> is a free tool designed for creators. We use advanced AI to reverse-engineer images into text descriptions, helping you overcome creative block.
                </div>
            </details>
        </div>
        
        <p class="mt-12 text-[10px] text-gray-300 text-center leading-6">
            Optimized for: Midjourney V6 ‚Ä¢ Stable Diffusion XL ‚Ä¢ DALL-E 3 ‚Ä¢ Image Analysis ‚Ä¢ Reverse Prompt Engineering ‚Ä¢ AI Art Helper
        </p>
    </div>

    <script>
        let currentCompressedBase64 = null;

        window.onload = renderHistory;

        async function handleFile(e) {
            const file = e.target.files[0];
            if (!file) return;

            const previewUrl = URL.createObjectURL(file);
            document.getElementById('placeholder').classList.add('hidden');
            const previewEl = document.getElementById('preview');
            previewEl.src = previewUrl;
            previewEl.classList.remove('hidden');
            document.getElementById('close-preview').classList.remove('hidden');

            try {
                currentCompressedBase64 = await compressImage(file);
                runQwen(); 
            } catch (err) { alert("Error: " + err.message); }
        }

        function removeImage(e) {
            e.stopPropagation();
            document.getElementById('file-input').value = '';
            document.getElementById('placeholder').classList.remove('hidden');
            document.getElementById('preview').classList.add('hidden');
            document.getElementById('close-preview').classList.add('hidden');
            document.getElementById('result').value = '';
            currentCompressedBase64 = null;
        }

        async function runQwen() {
            const loading = document.getElementById('loading');
            const resultEl = document.getElementById('result');
            
            resultEl.value = '';
            loading.classList.remove('hidden');

            try {
                // üü¢ ‰ΩøÁî® Node.js Ê®°ÂºèÁöÑ api/ask
                const response = await fetch('/api/ask', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        imageBase64: currentCompressedBase64
                    })
                });

                const rawText = await response.text();
                
                if (!response.ok) {
                    throw new Error(`Server Error (${response.status}): ${rawText}`);
                }

                let data;
                try {
                    data = JSON.parse(rawText);
                } catch(e) {
                    throw new Error("Invalid JSON response");
                }

                loading.classList.add('hidden');

                if (data.error) throw new Error(data.error);

                if (data.choices && data.choices.length > 0) {
                    const text = data.choices[0].message.content;
                    typeWriter(text);
                    saveHistory(text);
                } else {
                    throw new Error("No content returned.");
                }

            } catch (error) {
                loading.classList.add('hidden');
                resultEl.value = `‚ùå Error: ${error.message}`;
            }
        }

        function compressImage(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = (event) => {
                    const img = new Image();
                    img.src = event.target.result;
                    img.onload = () => {
                        const canvas = document.createElement('canvas');
                        const ctx = canvas.getContext('2d');
                        let width = img.width;
                        let height = img.height;
                        const maxSize = 800; 
                        if (width > height) { if (width > maxSize) { height *= maxSize / width; width = maxSize; } } 
                        else { if (height > maxSize) { width *= maxSize / height; height = maxSize; } }
                        canvas.width = width;
                        canvas.height = height;
                        ctx.drawImage(img, 0, 0, width, height);
                        resolve(canvas.toDataURL('image/jpeg', 0.6));
                    };
                    img.onerror = reject;
                };
                reader.onerror = reject;
            });
        }

        function typeWriter(text) {
            const el = document.getElementById('result');
            let i = 0;
            function type() {
                if (i < text.length) {
                    el.value += text.charAt(i);
                    el.scrollTop = el.scrollHeight;
                    i++;
                    setTimeout(type, 5);
                }
            }
            type();
        }

        function copyText() {
            const el = document.getElementById('result');
            if(!el.value) return;
            el.select();
            document.execCommand('copy');
            const btn = document.getElementById('copy-btn');
            const originalText = btn.innerText;
            btn.innerText = "COPIED";
            btn.classList.add('text-red-600');
            setTimeout(() => {
                btn.innerText = originalText;
                btn.classList.remove('text-red-600');
            }, 2000);
        }

        function saveHistory(prompt) {
            const history = JSON.parse(localStorage.getItem('picto_history') || '[]');
            const dateStr = new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute:'2-digit' });
            history.unshift({ prompt: prompt, date: dateStr });
            if (history.length > 3) history.pop();
            localStorage.setItem('picto_history', JSON.stringify(history));
            renderHistory();
        }

        function renderHistory() {
            const listEl = document.getElementById('history-list');
            const history = JSON.parse(localStorage.getItem('picto_history') || '[]');
            
            listEl.innerHTML = history.map((item, index) => `
                <div class="history-item bg-white p-6 border border-gray-100 hover:border-gray-400 transition cursor-pointer group" onclick="restorePrompt('${index}')">
                    <div class="flex justify-between items-center mb-4">
                        <span class="text-[10px] text-gray-400 font-mono uppercase tracking-wider">${item.date}</span>
                        <span class="text-[10px] text-black opacity-0 group-hover:opacity-100 transition tracking-widest uppercase">Restore</span>
                    </div>
                    <p class="text-xs text-gray-500 line-clamp-3 font-mono leading-relaxed group-hover:text-black transition">${item.prompt}</p>
                </div>
            `).join('');
            
            if(history.length === 0) {
                 listEl.innerHTML = `<div class="col-span-3 text-center text-gray-300 text-xs py-10 font-light tracking-wide">NO ARCHIVED PROMPTS YET</div>`;
            }
        }

        function clearHistory() {
            if(confirm('Delete all history?')) {
                localStorage.removeItem('picto_history');
                renderHistory();
            }
        }
    </script>
</body>
</html>
